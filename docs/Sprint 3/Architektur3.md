# Architektur

## Komponentendiagramm

![Komponentendiagramm](../referenziert/Architektur/Komponentendiagramm.png)

| **Komponente**      | **Requirements**                                                                                                                                                          | **Jira-Referenzen**                                                                                                                    |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| userInterface       | Req. 2.1, Req. 2.2, Req. 2.3, Req. 2.4, Req. 2.5, Req. 2.6, Req. 2.7, Req. 2.8, Req. 2.9, Req. 2.10, Req. 4.1, Req. 4.2, Req. 4.3, Req. 5.1, Req. 5.2, Req. 5.3, Req. 5.5 | BAT-10, BAT-11, BAT-12, BAT-13, BAT-14, BAT-15, BAT-16, BAT-17, BAT-18, BAT-19, BAT-26, BAT-27, BAT-28, BAT-29, BAT-30, BAT-31, BAT-33 |
| batteryLogic        | Req. 1.1, Req. 1.2, Req. 1.3, Req. 2.3, Req. 4.1, Req. 5.1, Req. 5.2, Req. 5.3, Req. 5.4, Req. 5.6, Req. 6.1, Req. 6.2, Req. 6.3                                          | BAT-7, BAT-8, BAT-9,BAT-12, BAT-26, BAT-29, BAT-30, BAT-31, BAT-32, BAT-34, BAT-35, BAT-36, BAT-37                                     |
| hardwareAbstraction | Req. 1.1, Req. 2.2, Req. 2.5, Req. 5.4, Req. 6.1, Req. 6.2, Req. 6.3                                                                                                      | BAT-7, BAT-11, BAT-14, BAT-32, BAT-35, BAT-36, BAT-37                                                                                  |
| persistenceManager  | Req. 3.1, Req. 3.2, Req. 3.3, Req. 4.2                                                                                                                                    | BAT-20, BAT-21, BAT-22, BAT-27                                                                                                         |

**Verantwortlichkeiten der Komponenten:**

| **Komponente**          | **Rolle**                  | **Verantwortlichkeiten**                                            |
|-------------------------|----------------------------|---------------------------------------------------------------------|
| **UserInterface**       | Pr채sentationsschicht       | Anzeige von Zust채nden, LED-Steuerung, Barrierefreiheit, Interaktion |
| **BatteryLogic**        | Business-Logik             | Ladezustand berechnen, Warnungen verwalten, Logik zu Ladevorg채ngen  |
| **HardwareAbstraction** | Hardware-Interface         | Zugriff auf Sensoren, Ladezust채nde, LEDs abstrahieren               |
| **PersistenceManager**  | Speicher- / Konfig-Schicht | Kalibrierung, Spannungsreferenz, persistente Werte speichern/laden  |

## Schnittstellendefinition

| **Ziel**              | **Quelle**            | **Schnittstellen**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-----------------------|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `userInterface`       | `batteryLogic`        | [updateOperationState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-updateoperationstate), [getDisplayState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getdisplaystate), [calculateStateOfCharge()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-calculatestateofcharge), [isLowBattery()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-islowbattery), [setDisplayState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-setdisplaystate), [calculateRemainingRuntime()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-calculateremainingruntime), [updateLowBatteryThreshold()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-updatelowbatterythreshold), [monitorChargeCycle()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-monitorchargecycle), [recalibrateIfNeeded()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-recalibrateifneeded)                                 |
| `hardwareAbstraction` | `batteryLogic`        | [isUndervoltageDetected()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-isundervoltagedetected), [handleButtonPress()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-handlebuttonpress)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                    |
| `userInterface`       | `hardwareAbstraction` | [updateBcProtectionStates()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-updatebcprotectionstates), [readVoltage()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-readvoltage), [getChargingState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getchargingstate)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `batteryLogic`        | `hardwareAbstraction` | [readVoltage()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-readvoltage), [setState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-setstate), [getChargingState()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getchargingstate), [updateBcProtectionStates()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-updatebcprotectionstates)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `batteryLogic`        | `persistenceManager`  | [readCalibVoltageToSoCToRuntimeFromDisc()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-readcalibvoltagetosoctoruntimefromdisc), [getVoltageCalib()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getvoltagecalib), [getSoCCalib()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getsoccalib), [getRuntime()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-getruntime), [setLowBatteryThreshold()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-setlowbatterythreshold), [writeCalibVoltageToSoCToRuntimeToDisc()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-writecalibvoltagetosoctoruntimetodisc), [setChargeCycleCount()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-setchargecyclecount), [readChargeCycleCount()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-readchargecyclecount), [setRuntimeCalib()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-setruntimecalib) |
| `userInterface`       | `persistenceManager`  | [readLowBatteryThresholdFromDisc()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-readlowbatterythresholdfromdisc)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `Programm`            | alle                  | [tick()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-tick), [update()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-update), [listenForChargingCommands()](../referenziert/Architektur/Schnittstellendokumentation.md#methode-listenforchargingcommands)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
